WhatsApp Chatbot with Google Gemini ProThis guide will walk you through creating a WhatsApp chatbot that uses the Google Gemini Pro API to generate intelligent responses. We'll use Node.js and the Meta for Developers platform.Step 1: PrerequisitesBefore you begin, make sure you have the following:Node.js: Installed on your machine. You can download it from nodejs.org.Google Gemini API Key:Go to Google AI Studio.Click "Get API key" and create a new key. Keep this key safe.Meta for Developers Account: A Facebook account that you can use to register as a developer at developers.facebook.com.Ngrok: A tool to expose your local server to the internet for testing. Download it from ngrok.com. This is crucial for Meta to send webhook events to your local machine.A spare phone number: This number will be used to send and receive messages from the chatbot during testing. It cannot be your primary WhatsApp number.Step 2: Set Up Your Meta App and WhatsApp BusinessCreate a Meta App:Go to your Meta Apps dashboard.Click "Create App" and select "Other", then "Business".Give your app a name and click "Create App".From the app dashboard, find "WhatsApp" and click "Set up".Configure WhatsApp:You'll be asked to link a Meta Business Account. You can create a new one if you don't have one.You'll get a temporary Test Phone Number and a Phone number ID. Note these down.You'll also get a temporary Access Token. This is very important. Copy it.Add a Recipient Phone Number:In the "To" field, add your personal phone number (the one you will use to test the chatbot).You'll receive a verification code on WhatsApp. Enter it to confirm your number.Step 3: Set Up the Node.js ProjectCreate a Project Folder:mkdir gemini-whatsapp-bot
cd gemini-whatsapp-bot
Initialize npm:npm init -y
Install Dependencies:npm install express body-parser axios dotenv @google/generative-ai
express: Web server framework.body-parser: Middleware to parse incoming request bodies.axios: To send messages back to the WhatsApp API.dotenv: To manage environment variables (your secret keys).@google/generative-ai: The official Google client for the Gemini API.Create Project Files:Create the following files in your project directory: index.js, .env.Populate the .env file:Open the .env file and add your credentials. Do not use quotation marks.GEMINI_API_KEY=YOUR_GEMINI_API_KEY
WHATSAPP_TOKEN=YOUR_WHATSAPP_TEMPORARY_ACCESS_TOKEN
VERIFY_TOKEN=SOME_RANDOM_SECURE_STRING
Replace YOUR_GEMINI_API_KEY with the key from Google AI Studio.Replace YOUR_WHATSAPP_TEMPORARY_ACCESS_TOKEN with the token from your Meta App dashboard.For VERIFY_TOKEN, create any random string (e.g., chatbot123). This is for security to ensure webhook requests are coming from Meta.Step 4: Running and Connecting the ChatbotStart Your Local Server:Open your terminal in the project folder and run:node index.js
You should see the message: Server is listening on port 3000.Expose Your Server with Ngrok:Open a new terminal window and run the following command to expose port 3000:ngrok http 3000
Ngrok will give you a public URL (e.g., https://random-string.ngrok-free.app). Copy the https URL.Configure the Webhook in Your Meta App:Go back to your WhatsApp configuration page in the Meta App dashboard.Find the "Webhook" section and click "Edit".Callback URL: Paste your Ngrok URL and add /webhook at the end (e.g., https://random-string.ngrok-free.app/webhook).Verify Token: Enter the same random string you put in your .env file for VERIFY_TOKEN.Click "Verify and save".Subscribe to Webhook Events:After verifying, still in the Webhook section, click "Manage".Subscribe to the messages event. This tells Meta to send you a notification every time your test number receives a message.Step 5: Test Your Chatbot!That's it! Send a message from your personal WhatsApp account to the Test Phone Number provided by Meta. Your local server will receive the message, forward it to Gemini, get a response, and send it back to you on WhatsApp.Step 6: Deployment (Going Live)Ngrok is only for development. When you are ready to go live, you need to deploy your index.js application to a permanent hosting service like:RenderVercelAWS EC2 or LambdaGoogle Cloud RunWhen you deploy, remember to:Use the public URL of your deployed service as the Webhook URL in the Meta dashboard.Set your environment variables (GEMINI_API_KEY, WHATSAPP_TOKEN, VERIFY_TOKEN) in your hosting provider's dashboard.Use a permanent WhatsApp Access Token, as the temporary one expires after 24 hours.
